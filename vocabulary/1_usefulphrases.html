<script>
  const lang = localStorage.getItem("selectedLanguage") || "en";

  function renderVocab() {
    const tbody = document.getElementById("vocabBody");
    tbody.innerHTML = "";

    const fragment = document.createDocumentFragment();

    vocab.forEach(item => {
      let translation;
      switch (lang) {
        case "cz": translation = item.czech; break;
        case "de": translation = item.german; break;
        case "es": translation = item.spanish; break;
        default: translation = item.english; break;
      }

      const row = document.createElement("tr");
      row.innerHTML = `<td>${item.czech}</td><td>${item.pronunciation}</td><td>${translation}</td>`;
      fragment.appendChild(row);
    });

    tbody.appendChild(fragment);

    // Apply other page translations
    if (typeof applyTranslations === "function") {
      applyTranslations(lang);
    }
  }

  // Immediately render vocab without waiting for DOMContentLoaded
  renderVocab();
</script>
